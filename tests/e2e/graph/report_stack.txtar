# SETUP: construct working folder layout
exec cp $REPODIR/tests/scripts/graph.sh $WORKDIR/graph.sh
cd $WORKDIR

env STACK=examples/graph/stack
env REPORTS=graph/cmd/graph/reports

# TEST: Stack Report: ModelInstance Name Check
exec sh -e graph.sh report -tag report_modelinstance_name -reports=$REPODIR/$REPORTS/stack.yaml $REPODIR/$STACK/sim_good

# TEST: Stack Report: ModelInstance Name Check with error
! exec sh -e graph.sh report --reports=$REPODIR/$REPORTS/stack.yaml $REPODIR/$STACK/sim_with_error

# TEST: Stack Report: Model UID Check
exec sh -e graph.sh report -tag report_model_uid -reports=$REPODIR/$REPORTS/stack.yaml $REPODIR/$STACK/sim_good

# TEST: Stack Report: Model UID Check with error
! exec sh -e graph.sh report --reports=$REPODIR/$REPORTS/stack.yaml $REPODIR/$STACK/sim_with_error
