# SETUP: construct working folder layout
exec cp $REPODIR/tests/scripts/workflow.sh $WORKDIR/workflow.sh
exec cp -r . $WORKDIR
cd $WORKDIR

# TEST: operate the simulation
exec sh -e workflow.sh openloop.dse
exists out/downloads/Models-${RELEASE_VERSION}-linux-amd64.zip
exists out/sim/model/simple/lib/libsimple.so
stdout 'Platform: linux-amd64'
stdout 'Model File: model/simple/lib/libsimple.so'
stdout 'val=9\.000000, final_val=9\.000000, name=counter'


-- openloop.dse --
simulation
channel signal

uses
dse.sdp https://github.com/boschglobal/dse.sdp v$RELEASE_VERSION

model simple Simple
channel signal data
file signalgroup.yaml signalgroup.yaml


-- signalgroup.yaml --
---
kind: SignalGroup
metadata:
  name: data
  labels:
    model: simple
    signal: data
spec:
  signals:
    - signal: counter
