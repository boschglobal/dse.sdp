# SETUP: construct working folder layout
exec cp $REPODIR/tests/scripts/workflow.sh $WORKDIR/workflow.sh
exec cp -r . $WORKDIR
cd $WORKDIR

# TEST: operate the simulation
exec sh -e workflow.sh localfile.dse

stdout 'Message: hello_from_model'

-- localfile.dse --
simulation
channel signal

uses
dse.sdp https://github.com/boschglobal/dse.sdp v$RELEASE_VERSION

envar MESSAGE hello_from_simulation
stack default
envar MESSAGE hello_from_stack
model simple Simple
channel signal data
envar MESSAGE hello_from_model
file signalgroup.yaml signalgroup.yaml

-- signalgroup.yaml --
---
kind: SignalGroup
metadata:
  name: data
  labels:
    model: simple
    signal: data
spec:
  signals:
    - signal: counter